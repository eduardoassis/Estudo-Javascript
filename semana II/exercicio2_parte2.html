<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-Type" content="text/html; charset=UTF-8">
  <title>Javascript - Exercício 2 - Parte 1</title>
</head>

<body>

<h1>Javascript  - Segunda semana</h1>

<section id="results"></section>

</body>

<script>

function treeSearch ( treeNodes, value ) {

  if ( treeNodes.value === value ) {
    return treeNodes;
  } else {

    if ( treeNodes.children && treeNodes.children.length > 0 ) {

      for ( var i = 0; i < treeNodes.children.length; i++ ) {
        var node = treeSearch( treeNodes.children[i], value );

        if ( node ) 
          return node;        
      }
    }  
  }
  return undefined;   
}

function Tree( treeNodes ) {

  var treeNodesInternal = treeNodes;
  var findNode = treeSearch;

  this.getNodes = function(){
    return treeNodesInternal;
  };

  this.search = function( value ) {
    return findNode( treeNodesInternal, value );
  };
};

var treeNodes =
{
  "value": 4,
  "name": "Node 4",
  "children": [
    {
      "value": 8,
      "name": "Node 8",
      "children": [
        {
          "value": 1,
          "name": "Node 1",
          "children": [
            {
              "value": 45,
              "name": "Node 45",
              "children": [ ]
            }
          ]
        },
        {
          "value": 6,
          "name": "Node 6",
          "children": [ ]
        },
        {
          "value": 7,
          "name": "Node 7",
          "children": [ ]
        }
      ]
    },
    {
      "value": 9,
      "name": "Node 9",
      "children": [
        {
          "value": 5,
          "name": "Node 5",
          "children": [
            {
              "value": 500,
              "name": "Node 500",
              "children": [
                {
                  "value": 5000,
                  "name": "Node 5000",
                  "children": [          
                  ]
                }
              ]
            }  
          ]
        }
      ]
    },
    {
      "value": 13,
      "name": "Node 13",
      "children": [ ]
    }
  ]
};


function teste( node ) {
  if( node ) {
    alert( "Nó encontrado. Value: " + node.value + "." + " Name: " + node.name + "." );
  } else {
    alert( "Nó não encontrado!" );
  }
}

var fade = function (node) {
  var level = 1;
  var step = function ( ) {
    var hex = level.toString(16);

    node.style.backgroundColor = '#FFFF' + hex + hex;

    if (level < 15) {

      level += 1;
      setTimeout(step, 100);

    }
  };
setTimeout(step, 100);
};
fade(document.body);


(function ( treeNodes ) {

    var myTree = new Tree( treeNodes );

    teste( myTree.search( 1000 ) );    

    teste( myTree.search( 5 ) );

})(treeNodes);
</script>

</html>