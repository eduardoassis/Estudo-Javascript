<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-Type" content="text/html; charset=UTF-8">
  <title>Javascript - Exercício 0</title>
</head>

<body>

<h1>Javascript  - Exercício 1</h1>

<p>
  Abra este arquivo html, edite e implemente os seguintes exercícios.
  Cada exercício é feito a partir do anterior. Assim, você deve fazer na ordem.
  <br>Considere o seguinte HTML:
</p>

<p>
      &lt;div id=&quot;pos0-0&quot;&gt;&lt;/div&gt;<br/>    
      &lt;div id=&quot;pos1-0&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos2-0&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos3-0&quot;&gt;&lt;/div&gt;<br/>
      <br/>   
      &lt;div id=&quot;pos0-1&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos1-1&quot;&gt;&lt;/div&gt;<br/>   
      &lt;div id=&quot;pos2-1&quot;&gt;&lt;/div&gt;<br/>    
      &lt;div id=&quot;pos3-1&quot;&gt;&lt;/div&gt;<br/>
      <br/>
      &lt;div id=&quot;pos0-2&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos1-2&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos2-2&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos3-2&quot;&gt;&lt;/div&gt;<br/>
      <br/>    
      &lt;div id=&quot;pos0-3&quot;&gt;&lt;/div&gt;<br/> 
      &lt;div id=&quot;pos1-3&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos2-3&quot;&gt;&lt;/div&gt;<br/>
      &lt;div id=&quot;pos3-3&quot;&gt;&lt;/div&gt;
</p>

<p>
  1- Crie uma "classe" Board que ao ser instanciada recuperará os elementos
  com o id posX-1, onde X vai de 0 a N. A função construtura receberá o número de
  elementos a serem recuperados. Após recuperar estes elementos, o objeto
  guardará os elementos em um array de objetos em uma propriedade chamada "positions".
  Cada objeto do array conterá apenas uma propriedade "element", que conterá o elemento
  recuperado.
  Veja o exemplo:

  <pre>

    var myBoard = new Board(2);

  </pre>

  Quando for chamado este código, o objeto board deverá ter um atributo contendo
  um array da seguinte forma:

  <pre>

    // valor de myBoard.positions

  [
    { element:  /* Aqui uma referência para o div de id = "pos0-1" */  },
    { element:  /* Aqui uma referência para o div de id = "pos1-1" */  }
  ]

</pre>

  Ou seja:

  <pre>

    myBoard.positions[0]   // retorna o div de id = "pos0-1"

  </pre>

</p>

<p>
  2- Altere a classe para que ela trabalhe em duas dimensões. O construtor passará a
  receber dois parâmetros N e M e recuperará os objetos com id posX-Y onde x vai de
  0 a N   e Y vai de 0 a M. Agora ao invés de armazenar um array, o objeto armazenará uma
  matriz. Por exemplo:

  <pre>

    var myBoard = new Board(3, 3);

  </pre>

  Fará com que o atributo myBoard.positions armazene uma matrix 3x3 contendo:

  <pre>

    myBoard.positions[1][1]   // retorna o div de id = "pos1-1"
    myBoard.positions[0][1]   // retorna o div de id = "pos0-1"
    myBoard.positions[2][0]   // retorna o div de id = "pos2-0"
    etc...

  </pre>
</p>

<p>
  3- Crie na classe Board um método getPosition(x, y) que retorna o objeto
  na posição x,y da matriz.
</p>

<br>
<br>

<p>
  Considerações: Utilize o module pattern para criar a classe Board. Nenhuma função
  deve ser criada fora desse escopo, ao menos para fins de testes.
</p>

<p>
  Dicas: document.getElementById
</p>

<section id="results"></section>

</body>

<!-- DIVs para teste: -->

<div id="pos0-0"></div>
<div id="pos1-0"></div>
<div id="pos2-0"></div>
<div id="pos3-0"></div>

<div id="pos0-1"></div>
<div id="pos1-1"></div>
<div id="pos2-1"></div>
<div id="pos3-1"></div>

<div id="pos0-2"></div>
<div id="pos1-2"></div>
<div id="pos2-2"></div>
<div id="pos3-2"></div>

<div id="pos0-3"></div>
<div id="pos1-3"></div>
<div id="pos2-3"></div>
<div id="pos3-3"></div>

<script>


  (function(){

    var att = "id";

    var walk_the_DOM = function walk(node, func) {
      func(node);
      node = node.firstChild;
      while (node) {
        walk(node, func);
        node = node.nextSibling;
      }
    };

    var getElementsByIds = function ( value ) {
      var results = [];

      walk_the_DOM(document.body, function (node) {

        var actual = node.nodeType === 1 && node.getAttribute( att );

        if ( typeof actual === 'string' && ( actual <= value || typeof value !== 'string' ) ) {
          results.push( node );
        }
      });

      return results;
    };

    window.Chess = window.Chess || {};

    window.Chess.Board = function( row, column ) {
      this._positions = getElementsByIds( 'pos' + row +'-'+ column );
    };

    var Board = window.Chess.Board;

    Board.prototype.getPosition = function( x, y ) {

      var element = this._positions[x][y];

      if ( element ) {
        return element;
      } else {
        throw { name: 'elementNonexistent', message: 'Elemento não encontrado.'};
      };
    };


  })();

  
  try {
    var myBoard = new window.Chess.Board( 2, 2 );

    var element = myBoard.getPosition( 0, 0 );

  } catch (e) {
    console.log(e.name + ': ' + e.message);
  };

</script>

</html>
